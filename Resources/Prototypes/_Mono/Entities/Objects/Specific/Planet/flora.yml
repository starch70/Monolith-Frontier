# SPDX-FileCopyrightText: 2025 starch
#
# SPDX-License-Identifier: AGPL-3.0-or-later

- type: entity
  id: BaseFlora
  description: Plant of goodies.
  abstract: true
  components:
  - type: SpriteFade
  - type: Clickable
  - type: Sprite
    noRot: true
    sprite: _Mono/Objects/Flora/flora.rsi
  - type: Physics
    bodyType: Static
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.2,-0.3,0.2,0.4"
        density: 150
        mask:
        - SmallMobMask
        layer:
        - Impassable
        - MidImpassable
        - LowImpassable
        - DoorPassable
        hard: False
  - type: Damageable
    damageContainer: StructuralInorganic
    damageModifierSet: Wood
  - type: MeleeSound
    soundGroups:
      Brute:
        path: /Audio/Weapons/slash.ogg
        params:
          variation: 0.05
  - type: InteractionOutline
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 12
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          path: /Audio/Effects/plant_rustle.ogg
          params:
            volume: 5
            variation: 0.05
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
      - !type:SpawnEntitiesBehavior
        spawn:
          Log:
            min: 2
            max: 8

- type: entity
  parent: BaseFlora
  id: FloraOrakimPlant
  name: orakim plant
  description: A large bush native to the planet below. Thrives in desert environments.
  components:
  - type: Sprite
    layers:
    - state: bush1
      map: ["random"]
    drawdepth: Overdoors
  - type: RandomSprite
    available:
    - random:
        bush1: ""
        bush2: ""
        bush3: ""
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 12
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          path: /Audio/Effects/plant_rustle.ogg
          params:
            volume: 5
            variation: 0.05
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
      - !type:SpawnEntitiesBehavior
        spawn:
          Log:
            min: 2
            max: 4
      - !type:SpawnEntitiesBehavior
        spawn:
          MaterialCloth1:
            min: 0
            max: 4

- type: entity
  parent: BaseFlora
  id: FloraPilumaPlant
  name: piluma plant
  description: A cluster of tall stalks. Edible for food and water, but hallucinogenic in nature.
  components:
  - type: Sprite
    sprite: _Mono/Objects/Flora/flora_32x.rsi
    layers:
    - state: stalkybush_1
      map: ["random"]
    drawdepth: Overdoors
    scale: 1.25, 1.25
  - type: RandomSprite
    available:
    - random:
        stalkybush_1: ""
        stalkybush_2: ""
        stalkybush_3: ""
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 12
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          path: /Audio/Effects/plant_rustle.ogg
          params:
            volume: 5
            variation: 0.05
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
      - !type:SpawnEntitiesBehavior
        spawn:
          FoodPilumaStalk:
            min: 1
            max: 3
